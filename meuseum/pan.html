<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iframe Panning and Zooming</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
        #container {
            position: relative;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
        }
        #iframe-wrapper {
            position: absolute;
            top: 0;
            left: 0;
            transform-origin: top left;
            cursor: grab;
        }
        iframe {
            width: 1200px; /* Adjust to fit iframe content */
            height: 800px; /* Adjust to fit iframe content */
            border: none;
        }
    </style>
</head>
<body>
    <button id="simulateClick">Simulate Click at Position</button>

    <div id="container">
        <div id="iframe-wrapper">
            <iframe src="https://www.artic.edu/artworks/28560/the-bedroom"></iframe>
        </div>
    </div>
    <script>
        const wrapper = document.getElementById('iframe-wrapper');
        const container = document.getElementById('container');
        let scale = 1, startX, startY, isPanning = false;

        // Mouse down to start panning
        wrapper.addEventListener('mousedown', (e) => {
            isPanning = true;
            startX = e.clientX - wrapper.offsetLeft;
            startY = e.clientY - wrapper.offsetTop;
            wrapper.style.cursor = 'grabbing';
        });

        // Mouse up to stop panning
        document.addEventListener('mouseup', () => {
            isPanning = false;
            wrapper.style.cursor = 'grab';
        });

        // Mouse move for panning
        document.addEventListener('mousemove', (e) => {
            if (!isPanning) return;
            const x = e.clientX - startX;
            const y = e.clientY - startY;

            // Prevent dragging out of bounds
            const containerRect = container.getBoundingClientRect();
            const wrapperRect = wrapper.getBoundingClientRect();

            if (wrapperRect.width > containerRect.width) {
                wrapper.style.left = `${Math.min(0, Math.max(x, containerRect.width - wrapperRect.width))}px`;
            }

            if (wrapperRect.height > containerRect.height) {
                wrapper.style.top = `${Math.min(0, Math.max(y, containerRect.height - wrapperRect.height))}px`;
            }
        });

        // Mouse wheel for zooming
        document.addEventListener('wheel', (e) => {
            e.preventDefault();
            const zoomSpeed = 0.1;
            scale += e.deltaY > 0 ? -zoomSpeed : zoomSpeed;
            scale = Math.max(0.5, Math.min(3, scale)); // Limit zoom level
            wrapper.style.transform = `scale(${scale})`;
        });

        // Add touch support for mobile devices
        let touchStartX, touchStartY;
        wrapper.addEventListener('touchstart', (e) => {
            isPanning = true;
            touchStartX = e.touches[0].clientX - wrapper.offsetLeft;
            touchStartY = e.touches[0].clientY - wrapper.offsetTop;
        });

        wrapper.addEventListener('touchmove', (e) => {
            if (!isPanning) return;
            const touchX = e.touches[0].clientX;
            const touchY = e.touches[0].clientY;
            const x = touchX - touchStartX;
            const y = touchY - touchStartY;
            wrapper.style.left = `${x}px`;
            wrapper.style.top = `${y}px`;
        });

        document.addEventListener('touchend', () => {
            isPanning = false;
        });


        const iframe = document.getElementById('iframe');
        const simulateClickBtn = document.getElementById('simulateClick');

        simulateClickBtn.addEventListener('click', () => {
            // Position to click inside the iframe (relative to the iframe's top-left corner)
            const targetX = 400; // Example X coordinate
            const targetY = 450; // Example Y coordinate

            // Calculate the actual coordinates relative to the viewport
            const rect = iframe.getBoundingClientRect();
            const clickX = rect.left + targetX;
            const clickY = rect.top + targetY;

            // Create and dispatch a click event
            const clickEvent = new MouseEvent('click', {
                bubbles: true,
                cancelable: true,
                view: window,
                clientX: clickX,
                clientY: clickY,
            });

            document.body.dispatchEvent(clickEvent); // Dispatch on the body
        });

    </script>
</body>
</html>
