<script>
async function fetchArtworkContent() {
    const artworkUrl = 'https://www.artic.edu/artworks/28560/the-bedroom';

    try {

        // Fetch the page content
        const response = await fetch(artworkUrl, {
            headers: {
                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'
            }
        });

        // Check if fetch was successful
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        // Get the HTML content
        const htmlContent = await response.text();

        // Create a temporary div to parse HTML
        const tempDiv = document.createElement('div');
        tempDiv.innerHTML = htmlContent;

        // Extract specific content areas
        const artworkTitle = tempDiv.querySelector('h1.title')?.textContent.trim();
        const artworkDescription = tempDiv.querySelector('.artwork-description')?.textContent.trim();
        const artworkImage = tempDiv.querySelector('img.artwork-image')?.src;

        // Create a new iframe with extracted content
        const newIframe = document.createElement('iframe');
        newIframe.srcdoc = `
            <!DOCTYPE html>
            <html>
            <head>
                <style>
                    body { 
                        font-family: Arial, sans-serif; 
                        max-width: 800px; 
                        margin: 0 auto; 
                        padding: 20px; 
                    }
                    h1 { color: #333; }
                    img { max-width: 100%; height: auto; }
                    .description { line-height: 1.6; }
                </style>
            </head>
            <body>
                <h1>${artworkTitle || 'Artwork Details'}</h1>
                ${artworkImage ? `<img src="${artworkImage}" alt="${artworkTitle}">` : ''}
                <div class="description">
                    ${artworkDescription || 'No description available.'}
                </div>
            </body>
            </html>
        `;

        // Append new iframe to document
        document.body.appendChild(newIframe);

        // Log extraction details
        console.log('Artwork content successfully extracted:');
        console.log('Title:', artworkTitle);
        console.log('Description length:', artworkDescription?.length || 0);
        console.log('Image URL:', artworkImage);

    } catch (error) {
        console.error('Error fetching artwork content:', error);
    }
}

// Alternative method using XMLHttpRequest (more compatible)
function fetchArtworkContentXHR() {
    const artworkUrl = 'https://www.artic.edu/artworks/28560/the-bedroom';

    const xhr = new XMLHttpRequest();
    xhr.open('GET', `https://cors-anywhere.herokuapp.com/${artworkUrl}`, true);
    
    xhr.setRequestHeader('User-Agent', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36');

    xhr.onload = function() {
        if (xhr.status === 200) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = xhr.responseText;

            // Extract key information (adjust selectors as needed)
            const artworkTitle = tempDiv.querySelector('h1')?.textContent.trim();
            
            console.log('Fetched Artwork Title:', artworkTitle);
            
            // Create iframe with extracted content
            const newIframe = document.createElement('iframe');
            newIframe.srcdoc = `
                <!DOCTYPE html>
                <html>
                <body>
                    <h1>${artworkTitle || 'Artwork Details'}</h1>
                    <p>Content extracted from the artwork page.</p>
                </body>
                </html>
            `;

            document.body.appendChild(newIframe);
        } else {
            console.error('Fetch failed:', xhr.statusText);
        }
    };

    xhr.onerror = function() {
        console.error('Fetch error occurred');
    };

    xhr.send();
}

// Run the fetch when the page loads
document.addEventListener('DOMContentLoaded', () => {
    // Choose one method
    fetchArtworkContent();
    // OR
    // fetchArtworkContentXHR();
});

</script>