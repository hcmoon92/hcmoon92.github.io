<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16"></p>
<h1>Strudel + WebAudio 예제</h1>
<p><button id="start">재생 시작</button><button id="stop">재생 정지</button></p>
<script type="module">
    import { repl, note } from "https://unpkg.com/@strudel/core@latest/dist/index.js";
    import {
      initAudioOnFirstClick,
      getAudioContext,
      webaudioOutput
    } from "https://unpkg.com/@strudel/webaudio@1.2.5/dist/index.js";

    // Web Audio 컨텍스트 & Strudel 동작 초기화
    initAudioOnFirstClick();
    const ctx = getAudioContext();
    const { scheduler, setPattern } = repl({
      defaultOutput: webaudioOutput(ctx),
      getTime: () => ctx.currentTime
    });

    // 예시 패턴 생성: c3 와 Eb3, G3 화음 + sawtooth 신스
    const pattern = note("c3", ["eb3", "g3"]).s("sawtooth");

    // 패턴 세팅
    setPattern(pattern);

    // 버튼 이벤트 연결
    document.getElementById("start").addEventListener("click", () => {
      scheduler.start();
    });

    document.getElementById("stop").addEventListener("click", () => {
      scheduler.stop();
    });
  </script>
