<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artwork Viewer</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
            font-family: Arial, sans-serif;
        }
        .image-container {
            position: relative;
            width: 1024px;
            height: 768px;
            overflow: hidden;
            border: 4px solid #333;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .zoomable-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.2s ease;
            cursor: move;
        }
        .zoom-controls {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
        }
        .zoom-controls button {
            background-color: #333;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
        }
        .coordinates {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(0,0,0,0.5);
            color: white;
            padding: 5px;
            border-radius: 3px;
        }
        .audio-player {
            margin-top: 10px;
        }
        .artwork-details {
            width: 1024px;
            padding: 10px;
            border: 2px solid #333;
            background-color: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        .artwork-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .artwork-notes {
            font-size: 16px;
            color: #555;
        }
    </style>
</head>
<body>
    <!-- Artwork Viewer -->
    <div class="image-container">
        <img id="zoomImage" class="zoomable-image" 
             src="" 
             alt="Zoomable and Pannable Image">
        <div class="zoom-controls">
            <button onclick="zoomInit()">Initial Zoom</button>
            <button onclick="zoomIn()">Zoom In</button>
            <button onclick="zoomOut()">Zoom Out</button>
        </div>
        <div class="coordinates" id="coordDisplay">X: 0, Y: 0</div>
    </div>

    <!-- Audio Player -->
    <div class="audio-player">
        <button onclick="toggleAudio()">Play/Pause Audio</button>
        <audio id="artworkAudio" src=""></audio>
    </div>

    <!-- Artwork Details -->
    <div class="artwork-details">
        <div id="artworkTitle" class="artwork-title">Artwork Title</div>
        <div id="artworkNotes" class="artwork-notes">Notes about the artwork will appear here.</div>
    </div>

    <script>
        // Function to load image and audio dynamically based on URL parameter
        function loadImageAndAudio() {
            const urlParams = new URLSearchParams(window.location.search);
            const imageId = urlParams.get('id'); // Artwork ID from URL
            const title = urlParams.get('title') || 'Untitled Artwork'; // Artwork title
            const notes = urlParams.get('notes') || 'No additional notes available.'; // Artwork notes

            if (imageId) {
                const imageElement = document.getElementById('zoomImage');
                const audioElement = document.getElementById('artworkAudio');
                const titleElement = document.getElementById('artworkTitle');
                const notesElement = document.getElementById('artworkNotes');

                const audioId = imageId.replace(/\.jpg$/, ''); // Removes the .jpg extension

                // Set the image, audio, title, and notes
                imageElement.src = `images/${imageId}`;
                audioElement.src = `artwork_mp3/${audioId}.mp3`; // Assuming audio files match image ID
                titleElement.textContent = title;
                notesElement.textContent = notes;
            } else {
                console.error('No image ID found in the URL.');
            }
        }

        // Call the load function
        loadImageAndAudio();

        // Audio play/pause function
        function toggleAudio() {
            const audioElement = document.getElementById('artworkAudio');
            if (audioElement.paused) {
                audioElement.play();
            } else {
                audioElement.pause();
            }
        }

        // Image zoom and pan logic
        const container = document.querySelector('.image-container');
        const image = document.getElementById('zoomImage');
        let scale = 1;
        let isDragging = false;
        let startX, startY, translateX = 0, translateY = 0;
        const maxScale = 5;

        function zoomInit() {
            scale = 1;
            translateX = 0;
            translateY = 0;
            updateImageTransform();
        }

        function zoomIn() {
            scale = Math.min(scale * 1.2, maxScale);
            updateImageTransform();
        }

        function zoomOut() {
            scale = Math.max(scale / 1.2, 1);
            updateImageTransform();
        }

        function updateImageTransform() {
            image.style.transform = `scale(${scale}) translate(${translateX}px, ${translateY}px)`;
        }

        image.addEventListener('mousedown', (e) => {
            isDragging = true;
            startX = e.clientX - translateX;
            startY = e.clientY - translateY;
            image.style.cursor = 'grabbing';
        });

        document.addEventListener('mouseup', () => {
            if (isDragging) {
                isDragging = false;
                image.style.cursor = 'grab';
            }
        });

        document.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            translateX = e.clientX - startX;
            translateY = e.clientY - startY;
            updateImageTransform();
        });

        image.addEventListener('dragstart', (e) => e.preventDefault());
    </script>
</body>
</html>
