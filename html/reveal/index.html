<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/white.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">
	</head>
	<body>

		<div>
			<h1>Select a Markdown file:</h1>
			<select id="markdown-selector" onchange="loadSelectedMarkdown()">
			  <option value="slides/web-dev/chap01.md">Web Dev - Chapter 1</option>
			  <option value="slides/web-ops/ops01.md">Web Ops - Operations 1</option>
			  <option value="slides/web-test/test01.md">Web Test - Test 1</option>
			</select>
		  </div>

		  <div class="reveal">
			<div class="slides" id="slides-container">
			  <!-- Markdown content will be loaded here -->
			  <section>
				<h2>Welcome to the Presentation!</h2>
				<p>Select a Markdown file from the dropdown above.</p>
			  </section>
			</div>
		  </div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>



  <!-- jQuery (optional, if you are using it) -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <!-- Your custom JavaScript -->
  <script>
    $(document).ready(function() {
      // Function to load selected Markdown file
      function loadSelectedMarkdown() {
        const selectedFile = $('#markdown-selector').val();
        fetchMarkdown(selectedFile);
      }

      // Function to fetch and load the markdown file content
      function fetchMarkdown(file) {
        $.get(file)
          .done(function(markdown) {
            // Ensure the slides container exists before modifying its content
            const slidesContainer = $('#slides-container');
            if (slidesContainer.length) {
              slidesContainer.html(`
                <section data-markdown>
                  <textarea data-template>
                    ${markdown}
                  </textarea>
                </section>
              `);

              // Reinitialize reveal.js to render the new content
              Reveal.sync();
            } else {
              console.error('Slides container not found.');
            }
          })
          .fail(function() {
            console.error(`Error loading ${file}`);
          });
      }

      // Initial load (optional: load the first file by default)
      loadSelectedMarkdown();

      // Attach event listener to dropdown to load selected markdown on change
      $('#markdown-selector').on('change', loadSelectedMarkdown);
    });
  </script>

<script>
	// More info about initialization & config:
	// - https://revealjs.com/initialization/
	// - https://revealjs.com/config/
	Reveal.initialize({
		hash: true,
		// Learn about plugins: https://revealjs.com/plugins/
		plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ],
		pdfSeparateFragments: false,
		pdfMaxPagesPerSlide: 1,
		pdfPageHeightOffset: 5,
		background: 'white'
	});
</script>

</body>
</html>