<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dynamic Reveal.js Presentation</title>
    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/theme/white.css">
    <link rel="stylesheet" href="plugin/highlight/monokai.css">
</head>
<body>

<div>
    <h1>Select a Markdown file:</h1>
    <select id="markdown-selector" onchange="loadSelectedMarkdown()">
        <option value="slides/web-dev/chap01.md">Web Dev - Chapter 1</option>
        <option value="slides/web-ops/chap01.md">Web Ops - Chapter 1</option>
        <option value="slides/web-test/chap01.md">Web Test - Chapter 1</option>
    </select>
</div>

<div class="reveal">
    <div class="slides" id="slides-container">
        <section>
            <h2>Welcome to the Presentation!</h2>
            <p>Select a Markdown file from the dropdown above.</p>
        </section>
    </div>
</div>

<script src="dist/reveal.js"></script>
<script src="plugin/notes/notes.js"></script>
<script src="plugin/markdown/markdown.js"></script>
<script src="plugin/highlight/highlight.js"></script>

<script>
    Reveal.initialize({
        hash: true,
        plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ],
        background: 'white'
    });

    function loadSelectedMarkdown() {
        const selectedFile = document.getElementById('markdown-selector').value;
        fetchMarkdown(selectedFile);
    }

    function fetchMarkdown(file) {
        fetch(file)
            .then(response => {
                if (!response.ok) {
                    throw new Error(`Error loading ${file}: ${response.statusText}`);
                }
                return response.text();
            })
            .then(markdown => {
                const slidesContainer = document.getElementById('slides-container');
                if (slidesContainer) {
                    slidesContainer.innerHTML = `
                        <section data-markdown>
                            <textarea data-template>${markdown}</textarea>
                        </section>
                    `;
                    Reveal.sync(); // Reinitialize Reveal.js
                } else {
                    console.error('Slides container not found.');
                }
            })
            .catch(error => {
                console.error('Error loading markdown:', error);
            });
    }

    // Initial load (optional: load the first file by default)
    loadSelectedMarkdown();
</script>

</body>
</html>
