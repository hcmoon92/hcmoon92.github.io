<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Load Text into Textarea</title>

  <script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/markmap-autoloader@0.14.3"></script>

  <script>
    const md = new markdownit();

    // Function to convert text to markdown
    function convertToMarkdown() {
      let inputText = document.getElementById('textArea').value;

      // Convert text to markdown using Markdown-it
      let markdown = md.render(inputText);

      // Display the result
      document.getElementById('markdownOutput').innerHTML = markdown; // Display in markdownOutput div


      // Convert the markdown into a mind map if autoLoader is true
      //if (window.markmap.autoLoader.manual === false) {
      //  renderMarkmap(inputText);
      //}

    }

    // Function to load the text file content into the textarea
    function loadTextContent(filePath) {
      fetch(filePath)
        .then(response => response.text())
        .then(data => {
          // Insert the content into the textarea
          document.getElementById('textArea').value = data;


          //document.getElementById('textInput').value = data;

          // Automatically convert the loaded text to markdown
          convertToMarkdown();
        })
        .catch(error => console.error('Error loading text file:', error));
    }

    // Load the text content when the page loads
    document.addEventListener('DOMContentLoaded', () => {
        window.markmap = {
            autoLoader: { manual: false },
        };

      loadTextContent('1411-1.md'); // Replace '1411-1.md' with your actual file path

    });

    // Function to render Markmap
    function renderMarkmap(inputText) {
        const markmapContainer = document.getElementById('markmap');
        markmapContainer.innerHTML = ''; // Clear previous content
        window.markmap.Markmap.create(markmapContainer, inputText);
    }

  </script>

  <style>
    /* Dark theme styling similar to VSCode */
    body {
      background-color: #1e1e1e;
      color: #dcdcdc;
      font-family: 'Courier New', monospace;
      padding: 20px;
      display: flex;
      justify-content: space-between;
      gap: 20px;
    }

    h1, h2 {
      color: #c5c5c5;
    }

    /* Flex container for left and right pane */
    .container {
      display: flex;
      width: 100%;
      gap: 20px;
    }

    /* Styling for left and right panes */
    .pane {
      background-color: #2d2d2d;
      color: #dcdcdc;
      border: 1px solid #444444;
      border-radius: 5px;
      padding: 10px;
      width: 48%;
    }

    /* Textarea styling */
    textarea {
      background-color: #2d2d2d;
      color: #dcdcdc;
      border: 1px solid #444444;
      border-radius: 5px;
      font-size: 16px;
      padding: 10px;
      width: 100%;
      height: 100%;
      resize: none;
    }

    /* Styling for the markdown output div */
    #markdownOutput {
      background-color: #2d2d2d;
      color: #dcdcdc;
      border: 1px solid #444444;
      border-radius: 5px;
      padding: 10px;
      font-family: 'Courier New', monospace;
      font-size: 16px;
      /* white-space: pre-wrap; /* Preserve line breaks */
      height: 100%;
      width: 100%;
      overflow-y: auto;
    }

    /* Additional styling for input/output layout */
    h2 {
      margin-top: 20px;
    }

    .markmap {
        width: 800px;
        height: 800px;
        position: relative;
      }            
      .markmap > svg {
        width: 100%;
        height: 100%;
      }
  </style>

</head>
<body>


  <div class="container">
    <!-- Left pane for textarea -->
    <div class="pane">
        <textarea id="textArea" oninput="convertToMarkdown()"></textarea>

    </div>

    <!-- Right pane for markdown output -->
    <div class="pane">
        <h2>Markdown Output:</h2>
        <div id="markdownOutput"></div>
    </div>

  </div>

    <!-- Markmap container -->
    <div class="markmap">            
        <textarea id="textInput"> 
            ---
            title: markmap
            markmap:
              colorFreezeLevel: 2
            ---
            # 1411-1. 스마트 TV 기반 멀티스크린 서비스 기술


            ## 스마트 TV 기반 멀티스크린 서비스 기술
            
            제공된 출처들은 스마트 TV 기반 멀티스크린 서비스 기술에 대한 직접적인 정보를 포함하고 있지 않습니다. 
            
            하지만, 출처들은 다양한 정보통신 기술에 대한 시험 문제들을 제공하며, 이를 통해 스마트 TV 기반 멀티스크린 서비스 기술과 관련된 몇 가지 중요한 개념들을 추론해 볼 수 있습니다. 
            
            * **멀티스크린 서비스**: 
                * 2014년도 제2회 정보통신기술사 시험에서 N-스크린 기술에 대한 문제가 출제되었습니다. N-스크린은 스마트 TV, 스마트폰, 태블릿 PC 등 다양한 기기를 통해 콘텐츠를 이용할 수 있는 서비스를 의미합니다. 스마트 TV 기반 멀티스크린 서비스는 이러한 N-스크린 서비스의 한 형태로 볼 수 있습니다. 
            * **스마트 TV**: 
                * 2014년도 제1회 정보통신기술사 시험에서 스마트 TV 기반 멀티스크린 서비스 기술에 대한 문제가 출제되었습니다. 이는 스마트 TV가 멀티스크린 서비스를 위한 핵심 플랫폼으로 인식되고 있음을 보여줍니다. 
            * **관련 기술**: 
                * 출처들은 **IPTV**, **위성통신**, **무선통신**, **네트워크 기술**, **보안 기술** 등 멀티스크린 서비스 구현에 필요한 다양한 기술들에 대한 정보를 제공합니다. 
                * 이러한 기술들은 스마트 TV 기반 멀티스크린 서비스를 구현하는 데에도 활용될 수 있습니다. 
            
            **스마트 TV 기반 멀티스크린 서비스 기술은 스마트 TV를 중심으로 다양한 기기와 네트워크를 연동하여 콘텐츠를 공유하고 사용자 경험을 확장하는 기술입니다.** 
            
            **이를 위해서는 콘텐츠 전송 및 관리 기술, 기기 간 통신 및 연동 기술, 사용자 인터페이스 기술, 보안 기술 등 다양한 기술들이 필요합니다.** 
            
            제공된 출처만으로는 스마트 TV 기반 멀티스크린 서비스 기술에 대한 자세한 정보를 얻을 수 없으므로, 추가적인 자료를 참고하여 더 자세히 알아볼 필요가 있습니다. 
            
        </textarea>
    </div>
    <svg id="markmap" style="width: 800px; height: 800px;"></svg>

</body>
</html>